// TODO: use animation library
// TODO: how to do time-checks? [time markers?]
// TODO: real world: mountain time trial
// TODO: rethink redzone and fatigue: maybe energy can go negative; it just reduces your power (ie, no "redzone" counter) [based on negative fuel percentage and base power?]
// TODO: average speed from last time interval for smoothing?
// TODO: check flat stage time trial (from last year's TdF) for Sprinter and Climber times (to check power curves)
// TODO: drafting only works above a specific speed?
// TODO: numbers in breakaway increase advantage?
// TODO: animating the group dynamics might help problem solving
// TODO: change power curve to more straightforward duration interpolation at intervals (2s, 5s, 60s, 5m, 20m, 45m, 6hrs)
// TODO: sprinter may use too much energy at 1600 watts
// TODO: power is reduced, via easing function, when energy is below 20% (and player avatar starts sweating)
// TODO: burst energy vs. overall energy? [like the Cycling game]
// TODO: crashing on curves
// TODO: team with most riders "pulling" in a group get to control it (ie, set its pace)
// TODO: rider modeling/visualizer
// TODO: add a debug rider UI to the test engine
// TODO: time trials!
// TODO: helicopter view with current, live standings

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

IDEAS:

course is measured in kilometers
time is measured in seconds

max power * effort = desired power
fatigue (fuel remaining) affects power output
acceleration determines how fast your power ramps up

once you're out of fuel, your power drops to the "recover rate" level

sprinters vs. climbers?
sprinter = high max power, slow recovery
climber = lower max power, higher recovery
tt = high-ish max power, good recovery

overnight recovery?

SCENARIOS:

flat time trial: for TT victors
sprint finish
straight climb
rolling course

"To win the Tour de France you need to be able to hold 5.9 to 6.0 watts per kg for 30 to 45 minutes at a time, 3 to 4 times over the course of a 5 to 6 hour day in the mountains." -- cyclingtips.com

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// DONE: calculate more precise finishing time (ie, not rounded to 10 seconds)
// DONE: power curves for each rider
// DONE: climbing ability versus flat ability
// DONE: distance from power
// DONE: descending speed accurate? [seems close]
// DONE: downhill shouldn't use as much energy [works as part of the standard power equation; just don't set effort to 0]
// DONE: rolling course tests
// DONE: slowing down, not stopping immediately, when out of energy [averages last speed]
// DONE: sprinting power may need to be re-thought since the step size is 10 seconds (that's too long to be considered "accelerating" to 1600 watts if that only lasts 2 seconds) [1 second intervals now]
// DONE: come up with a starting fuel tank number [based on FTP minus recovery rate]
// DONE: implement and test descending ability
// DONE: negative energy is slower to recover
// DONE: bonk recovery
// DONE: group tests
// DONE: need group power or speed setting (varies per leader!)
// DONE: fatigue? bonking penalty? [negative fuel = slow to recover; fatigue can be reduced power below 20%]
// DONE: riders try to stay in groups by maintaining the same distance/speed [ie, power is different per rider; drafting comes later]
// DONE: refactor step flow so groups process first (as one) and then individuals?
// DONE: ability to "speed up" and "slow down" to maintain desired speed per update? similar to trying to ride with another rider for protection, etc.?
// DONE: determine if I should be averaging speed from one step to the next or not [I turned it off; we'll have to see if animation proves it out]
// DONE: group needs a better "effort" setting [leader "power" setting]
// NOTE: 15-30% grade in Stage 3 of 2016 Vuelta, 1.8km, 6:30 minutes [test in place]
// DONE: graph the power curves to make sure they look right
// DONE: get rid of maxPower [replace with top-end of power curve]
